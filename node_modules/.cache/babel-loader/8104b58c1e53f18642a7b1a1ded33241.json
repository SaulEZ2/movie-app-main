{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sauls.DESKTOP-PNDI2L9\\\\OneDrive\\\\Escritorio\\\\PRUEBA CLONACION DE REPOSITORIO REACT\\\\movie-app-main\\\\src\\\\components\\\\popup\\\\index.tsx\",\n    _s = $RefreshSig$();\n\nimport { createPortal } from \"react-dom\";\nimport { useContext, useEffect, useRef } from \"react\";\nimport { UserContext } from \"context/userContext\";\nimport { Loader, Rating } from \"components\";\nimport { BookMark, Heart, Remove } from \"assets/icons/icons\";\nimport styles from \"./popup.module.scss\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Popup = _ref => {\n  _s();\n\n  let {\n    loading,\n    favorite,\n    watchlater,\n    rating,\n    toggleFavorite,\n    toggleWatchlater,\n    onRating,\n    onDeleteRating,\n    buttonRect\n  } = _ref;\n  const {\n    texts\n  } = useContext(UserContext);\n  const popupRef = useRef(null);\n\n  const calculatePosition = () => {\n    if (!buttonRect) return;\n    const {\n      top,\n      left,\n      width,\n      height\n    } = buttonRect;\n    const vw = window.innerWidth;\n    const vh = window.innerHeight;\n    const leftOffset = left + width + 100 > vw;\n    const topOffset = top + height + 150 > vh;\n    const scrollTop = window.pageYOffset || document.documentElement.scrollTop;\n    return {\n      left: `${leftOffset ? vw - width - 70 : left + 10}px`,\n      top: `${topOffset ? top + height + scrollTop - 200 : top + height + scrollTop + 10}px`\n    };\n  };\n\n  useEffect(() => {\n    if (buttonRect.top === 0 && buttonRect.left === 0) return;\n    setTimeout(() => {\n      var _popupRef$current;\n\n      return (_popupRef$current = popupRef.current) === null || _popupRef$current === void 0 ? void 0 : _popupRef$current.focus();\n    }, 100);\n  }, [buttonRect]);\n  if (buttonRect.top === 0 && buttonRect.left === 0) return null;\n  return /*#__PURE__*/createPortal( /*#__PURE__*/_jsxDEV(\"ul\", {\n    className: styles.popup,\n    style: calculatePosition(),\n    onClick: e => e.stopPropagation(),\n    ref: popupRef,\n    tabIndex: 0,\n    children: loading ? /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 5\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"li\", {\n        tabIndex: 0,\n        onClick: toggleFavorite,\n        onKeyPress: e => {\n          if (e.key === \"Enter\") toggleFavorite();\n        },\n        className: `${styles.popup__item} ${favorite ? styles.active : \"\"}`,\n        children: [/*#__PURE__*/_jsxDEV(Heart, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 7\n        }, this), \" \", texts.card.favorite]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 6\n      }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n        tabIndex: 0,\n        onClick: toggleWatchlater,\n        onKeyPress: e => {\n          if (e.key === \"Enter\") toggleWatchlater();\n        },\n        className: `${styles.popup__item} ${watchlater ? styles.active : \"\"}`,\n        children: [/*#__PURE__*/_jsxDEV(BookMark, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 7\n        }, this), \" \", texts.card.watchLater]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 6\n      }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n        className: styles.popup__item,\n        children: /*#__PURE__*/_jsxDEV(Rating, {\n          initialValue: rating,\n          onClick: onRating,\n          ratingValue: rating,\n          transition: true,\n          allowHalfIcon: true,\n          size: 23\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 6\n      }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n        tabIndex: 0,\n        onClick: onDeleteRating,\n        className: styles.popup__item,\n        onKeyPress: e => {\n          if (e.key === \"Enter\") toggleFavorite();\n        },\n        children: /*#__PURE__*/_jsxDEV(Remove, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 6\n      }, this)]\n    }, void 0, true)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 3\n  }, this), document.getElementById(\"popup\"));\n};\n\n_s(Popup, \"oqQ/FbmKQbERFk2cDYQG3MPJqGs=\");\n\n_c = Popup;\nexport { Popup };\n\nvar _c;\n\n$RefreshReg$(_c, \"Popup\");","map":{"version":3,"names":["createPortal","useContext","useEffect","useRef","UserContext","Loader","Rating","BookMark","Heart","Remove","styles","Popup","loading","favorite","watchlater","rating","toggleFavorite","toggleWatchlater","onRating","onDeleteRating","buttonRect","texts","popupRef","calculatePosition","top","left","width","height","vw","window","innerWidth","vh","innerHeight","leftOffset","topOffset","scrollTop","pageYOffset","document","documentElement","setTimeout","current","focus","popup","e","stopPropagation","key","popup__item","active","card","watchLater","getElementById"],"sources":["C:/Users/sauls.DESKTOP-PNDI2L9/OneDrive/Escritorio/PRUEBA CLONACION DE REPOSITORIO REACT/movie-app-main/src/components/popup/index.tsx"],"sourcesContent":["import { createPortal } from \"react-dom\";\nimport { useContext, useEffect, useRef } from \"react\";\nimport { UserContext } from \"context/userContext\";\nimport { Loader, Rating } from \"components\";\nimport { BookMark, Heart, Remove } from \"assets/icons/icons\";\nimport styles from \"./popup.module.scss\";\n\ninterface PopupInterface {\n\tloading: boolean;\n\tfavorite: boolean;\n\twatchlater: boolean;\n\trating: number;\n\ttoggleFavorite: () => void;\n\ttoggleWatchlater: () => void;\n\tonRating: (value: number) => void;\n\tonDeleteRating: () => void;\n\tbuttonRect: {\n\t\ttop: number;\n\t\tleft: number;\n\t\twidth: number;\n\t\theight: number;\n\t};\n}\n\nconst Popup = ({\n\tloading,\n\tfavorite,\n\twatchlater,\n\trating,\n\ttoggleFavorite,\n\ttoggleWatchlater,\n\tonRating,\n\tonDeleteRating,\n\tbuttonRect,\n}: PopupInterface) => {\n\tconst { texts } = useContext(UserContext);\n\tconst popupRef = useRef<HTMLUListElement>(null);\n\n\tconst calculatePosition = () => {\n\t\tif (!buttonRect) return;\n\t\tconst { top, left, width, height } = buttonRect;\n\t\tconst vw = window.innerWidth;\n\t\tconst vh = window.innerHeight;\n\t\tconst leftOffset = left + width + 100 > vw;\n\t\tconst topOffset = top + height + 150 > vh;\n\t\tconst scrollTop = window.pageYOffset || document.documentElement.scrollTop;\n\n\t\treturn {\n\t\t\tleft: `${leftOffset ? vw - width - 70 : left + 10}px`,\n\t\t\ttop: `${topOffset ? top + height + scrollTop - 200 : top + height + scrollTop + 10}px`,\n\t\t};\n\t};\n\n\tuseEffect(() => {\n\t\tif (buttonRect.top === 0 && buttonRect.left === 0) return;\n\t\tsetTimeout(() => popupRef.current?.focus(), 100);\n\t}, [buttonRect]);\n\n\tif (buttonRect.top === 0 && buttonRect.left === 0) return null;\n\n\treturn createPortal(\n\t\t<ul\n\t\t\tclassName={styles.popup}\n\t\t\tstyle={calculatePosition()}\n\t\t\tonClick={(e) => e.stopPropagation()}\n\t\t\tref={popupRef}\n\t\t\ttabIndex={0}\n\t\t>\n\t\t\t{loading ? (\n\t\t\t\t<Loader />\n\t\t\t) : (\n\t\t\t\t<>\n\t\t\t\t\t<li\n\t\t\t\t\t\ttabIndex={0}\n\t\t\t\t\t\tonClick={toggleFavorite}\n\t\t\t\t\t\tonKeyPress={(e) => {\n\t\t\t\t\t\t\tif (e.key === \"Enter\") toggleFavorite();\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tclassName={`${styles.popup__item} ${favorite ? styles.active : \"\"}`}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Heart /> {texts.card.favorite}\n\t\t\t\t\t</li>\n\t\t\t\t\t<li\n\t\t\t\t\t\ttabIndex={0}\n\t\t\t\t\t\tonClick={toggleWatchlater}\n\t\t\t\t\t\tonKeyPress={(e) => {\n\t\t\t\t\t\t\tif (e.key === \"Enter\") toggleWatchlater();\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tclassName={`${styles.popup__item} ${watchlater ? styles.active : \"\"}`}\n\t\t\t\t\t>\n\t\t\t\t\t\t<BookMark /> {texts.card.watchLater}\n\t\t\t\t\t</li>\n\t\t\t\t\t<li className={styles.popup__item}>\n\t\t\t\t\t\t<Rating\n\t\t\t\t\t\t\tinitialValue={rating}\n\t\t\t\t\t\t\tonClick={onRating}\n\t\t\t\t\t\t\tratingValue={rating}\n\t\t\t\t\t\t\ttransition\n\t\t\t\t\t\t\tallowHalfIcon\n\t\t\t\t\t\t\tsize={23}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li\n\t\t\t\t\t\ttabIndex={0}\n\t\t\t\t\t\tonClick={onDeleteRating}\n\t\t\t\t\t\tclassName={styles.popup__item}\n\t\t\t\t\t\tonKeyPress={(e) => {\n\t\t\t\t\t\t\tif (e.key === \"Enter\") toggleFavorite();\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Remove />\n\t\t\t\t\t</li>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</ul>,\n\t\tdocument.getElementById(\"popup\") as HTMLElement\n\t);\n};\n\nexport { Popup };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}