{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sauls.DESKTOP-PNDI2L9\\\\OneDrive\\\\Escritorio\\\\movie-app-main\\\\src\\\\pages\\\\search\\\\index.tsx\",\n    _s = $RefreshSig$();\n\nimport { useLocation } from \"react-router-dom\";\nimport { useContext, useEffect, useState } from \"react\";\nimport { UserContext } from \"context\";\nimport { Back, Card, Loader, Preview, SearchBar } from \"components\";\nimport { useGetItemsAPI, useInfiniteScroll } from \"hooks\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Search = () => {\n  _s();\n\n  const {\n    language,\n    texts\n  } = useContext(UserContext);\n  const {\n    search\n  } = useLocation();\n  const [query, setQuery] = useState(new URLSearchParams(search).get(\"search\"));\n  const [movies, loadingMovies, getMovies, getMoreMovies, hasMore] = useGetItemsAPI({\n    initialValue: [],\n    destruct: \"results\",\n    msg: texts.errors.errorGet\n  });\n  const lastMovieElementRef = useInfiniteScroll(() => getMoreMovies(\"/search/movie\", {\n    query,\n    language,\n    include_image_language: language\n  }), loadingMovies, hasMore);\n\n  const onPopstate = lang => {\n    setQuery(new URLSearchParams(window.location.search).get(\"search\"));\n    getMovies(\"/search/movie\", {\n      query,\n      language: lang,\n      include_image_language: lang\n    });\n  };\n\n  useEffect(() => {\n    window.addEventListener(\"popstate\", () => onPopstate(language));\n    getMovies(\"/search/movie\", {\n      query,\n      language,\n      include_image_language: language\n    });\n    return () => {\n      window.removeEventListener(\"popstate\", () => onPopstate(language));\n    };\n  }, [query, language]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(SearchBar, {\n      value: query || \"\",\n      setValue: setQuery\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Back, {\n      button: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Preview, {\n      title: `${texts.search.title} ${query}`,\n      grid: true,\n      children: movies.length > 0 ? movies.map((_ref, i) => {\n        let {\n          adult,\n          id,\n          overview,\n          title,\n          poster_path,\n          vote_average\n        } = _ref;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: i === movies.length - 1 ? lastMovieElementRef : null,\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            id: id,\n            title: title,\n            adult: adult,\n            img: poster_path,\n            overview: overview,\n            link: `/movie/${id}`,\n            voteAverage: vote_average\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 45,\n            columnNumber: 8\n          }, this)\n        }, id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 7\n        }, this);\n      }) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: !loadingMovies && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"center\",\n          children: texts.infiniteScroll.noResults\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 27\n        }, this)\n      }, void 0, false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 4\n    }, this), loadingMovies && /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 22\n    }, this), !hasMore && !loadingMovies && movies.length > 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"center\",\n      children: texts.infiniteScroll.limit\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Search, \"0uIa4Txp8nCw5FXhJdh+ZrM4qzI=\", false, function () {\n  return [useLocation, useGetItemsAPI, useInfiniteScroll];\n});\n\n_c = Search;\nexport { Search };\n\nvar _c;\n\n$RefreshReg$(_c, \"Search\");","map":{"version":3,"names":["useLocation","useContext","useEffect","useState","UserContext","Back","Card","Loader","Preview","SearchBar","useGetItemsAPI","useInfiniteScroll","Search","language","texts","search","query","setQuery","URLSearchParams","get","movies","loadingMovies","getMovies","getMoreMovies","hasMore","initialValue","destruct","msg","errors","errorGet","lastMovieElementRef","include_image_language","onPopstate","lang","window","location","addEventListener","removeEventListener","title","length","map","i","adult","id","overview","poster_path","vote_average","infiniteScroll","noResults","limit"],"sources":["C:/Users/sauls.DESKTOP-PNDI2L9/OneDrive/Escritorio/movie-app-main/src/pages/search/index.tsx"],"sourcesContent":["import { useLocation } from \"react-router-dom\";\nimport { useContext, useEffect, useState } from \"react\";\nimport { UserContext } from \"context\";\nimport { Back, Card, Loader, Preview, SearchBar } from \"components\";\nimport { useGetItemsAPI, useInfiniteScroll } from \"hooks\";\n\nconst Search = () => {\n\tconst { language, texts } = useContext(UserContext);\n\tconst { search } = useLocation();\n\tconst [query, setQuery] = useState(new URLSearchParams(search).get(\"search\"));\n\tconst [movies, loadingMovies, getMovies, getMoreMovies, hasMore] = useGetItemsAPI({\n\t\tinitialValue: [],\n\t\tdestruct: \"results\",\n\t\tmsg: texts.errors.errorGet,\n\t});\n\n\tconst lastMovieElementRef = useInfiniteScroll(\n\t\t() => getMoreMovies(\"/search/movie\", { query, language, include_image_language: language }),\n\t\tloadingMovies,\n\t\thasMore\n\t);\n\n\tconst onPopstate = (lang: string) => {\n\t\tsetQuery(new URLSearchParams(window.location.search).get(\"search\"));\n\t\tgetMovies(\"/search/movie\", { query, language: lang, include_image_language: lang });\n\t};\n\n\tuseEffect(() => {\n\t\twindow.addEventListener(\"popstate\", () => onPopstate(language));\n\t\tgetMovies(\"/search/movie\", { query, language, include_image_language: language });\n\n\t\treturn () => {\n\t\t\twindow.removeEventListener(\"popstate\", () => onPopstate(language));\n\t\t};\n\t}, [query, language]); \n\n\treturn (\n\t\t<>\n\t\t\t<SearchBar value={query || \"\"} setValue={setQuery} />\n\t\t\t<Back button />\n\t\t\t<Preview title={`${texts.search.title} ${query}`} grid>\n\t\t\t\t{movies.length > 0 ? (\n\t\t\t\t\tmovies.map(({ adult, id, overview, title, poster_path, vote_average }, i) => (\n\t\t\t\t\t\t<div key={id} ref={i === movies.length - 1 ? lastMovieElementRef : null}>\n\t\t\t\t\t\t\t<Card\n\t\t\t\t\t\t\t\tid={id}\n\t\t\t\t\t\t\t\ttitle={title}\n\t\t\t\t\t\t\t\tadult={adult}\n\t\t\t\t\t\t\t\timg={poster_path}\n\t\t\t\t\t\t\t\toverview={overview}\n\t\t\t\t\t\t\t\tlink={`/movie/${id}`}\n\t\t\t\t\t\t\t\tvoteAverage={vote_average}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t))\n\t\t\t\t) : (\n\t\t\t\t\t<>{!loadingMovies && <p className=\"center\">{texts.infiniteScroll.noResults}</p>}</>\n\t\t\t\t)}\n\t\t\t</Preview>\n\t\t\t{loadingMovies && <Loader />}\n\t\t\t{!hasMore && !loadingMovies && movies.length > 0 && (\n\t\t\t\t<p className=\"center\">{texts.infiniteScroll.limit}</p>\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport { Search };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}