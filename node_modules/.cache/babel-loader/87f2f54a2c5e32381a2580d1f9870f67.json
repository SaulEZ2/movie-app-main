{"ast":null,"code":"var _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$(),\n    _s4 = $RefreshSig$();\n\nimport { useState } from \"react\";\nimport { api, Toast } from \"utils\";\n\nconst useGetItemsAPI = _ref => {\n  _s();\n\n  let {\n    initialValue = [],\n    destruct,\n    msg\n  } = _ref;\n  // TODO: Usamos sweetalert2 o algo para informar al usuario si hubo un error y para avisar si algunas acciones se realizaron con éxito\n  const [items, setItems] = useState(initialValue);\n  const [page, setPage] = useState(1);\n  const [loading, setLoading] = useState(false);\n  const [hasMore, setHasMore] = useState(true); // El param destruct es para destruir directamente los diferentes puntos finales de la API, como géneros\n\n  const getItems = async (path, params) => {\n    setLoading(true);\n    await api.get(path, {\n      params: { ...params\n      }\n    }).then(res => {\n      setPage(page + 1);\n      setItems(res.data[destruct]);\n      if (res.data.page === res.data.total_pages) return setHasMore(false);\n    }).catch(err => Toast.fire({\n      icon: \"error\",\n      title: msg\n    }).then(() => console.log(err))).finally(() => {\n      setLoading(false);\n    });\n  };\n\n  const getMoreItems = async (path, params) => {\n    setLoading(true);\n    await api.get(path, {\n      params: {\n        page: page,\n        ...params\n      }\n    }).then(res => {\n      setItems(prevData => [...prevData, ...res.data[destruct]]);\n      if (res.data.page === res.data.total_pages) return setHasMore(false);\n    }).catch(err => Toast.fire({\n      icon: \"error\",\n      title: msg\n    }).then(() => console.log(err))).finally(() => {\n      setPage(page + 1);\n      setLoading(false);\n    });\n  };\n\n  return [items, loading, getItems, getMoreItems, hasMore];\n};\n\n_s(useGetItemsAPI, \"g/Y0Bkb6ZrKhDOWodpYC4ebmcV0=\");\n\nconst useGetItemAPI = _ref2 => {\n  _s2();\n\n  let {\n    path,\n    msg\n  } = _ref2;\n  const [loading, setLoading] = useState(false);\n\n  const getItem = async params => {\n    setLoading(true);\n    return await api.get(path, {\n      params: { ...params\n      }\n    }).then(res => res.data).catch(err => Toast.fire({\n      icon: \"error\",\n      title: msg\n    }).then(() => console.log(err))).finally(() => setLoading(false));\n  };\n\n  return [loading, getItem];\n};\n\n_s2(useGetItemAPI, \"/Rjh5rPqCCqf0XYnTUk9ZNavw3Q=\");\n\nconst usePostAPI = _ref3 => {\n  _s3();\n\n  let {\n    path,\n    msg\n  } = _ref3;\n  const [loading, setLoading] = useState(false);\n\n  const postItem = async (body, params) => {\n    setLoading(true);\n    return await api.post(path, { ...body,\n      ...params\n    }).then(res => res.data).catch(err => Toast.fire({\n      icon: \"error\",\n      title: msg\n    }).then(() => console.log(err))).finally(() => setLoading(false));\n  };\n\n  return [loading, postItem];\n};\n\n_s3(usePostAPI, \"/Rjh5rPqCCqf0XYnTUk9ZNavw3Q=\");\n\nconst useDeleteAPI = _ref4 => {\n  _s4();\n\n  let {\n    path,\n    msg\n  } = _ref4;\n  const [loading, setLoading] = useState(false);\n\n  const deleteItem = async (body, params) => {\n    setLoading(true);\n    return await api.delete(path, {\n      data: body,\n      ...params\n    }).then(res => res.data).catch(err => Toast.fire({\n      icon: \"error\",\n      title: msg\n    }).then(() => console.log(err))).finally(() => setLoading(false));\n  };\n\n  return [loading, deleteItem];\n};\n\n_s4(useDeleteAPI, \"/Rjh5rPqCCqf0XYnTUk9ZNavw3Q=\");\n\nexport { useGetItemsAPI, useGetItemAPI, usePostAPI, useDeleteAPI };","map":{"version":3,"names":["useState","api","Toast","useGetItemsAPI","initialValue","destruct","msg","items","setItems","page","setPage","loading","setLoading","hasMore","setHasMore","getItems","path","params","get","then","res","data","total_pages","catch","err","fire","icon","title","console","log","finally","getMoreItems","prevData","useGetItemAPI","getItem","usePostAPI","postItem","body","post","useDeleteAPI","deleteItem","delete"],"sources":["C:/Users/sauls.DESKTOP-PNDI2L9/OneDrive/Escritorio/movie-app-main/src/hooks/useApi.ts"],"sourcesContent":["import { useState } from \"react\";\nimport { api, Toast } from \"utils\"\ninterface getItemsProps {\n\tinitialValue: any[];\n\tdestruct: string\n\tmsg: string\n}\n\n\nconst useGetItemsAPI = ({ initialValue = [], destruct, msg }: getItemsProps) => {\n\t// TODO: Usamos sweetalert2 o algo para informar al usuario si hubo un error y para avisar si algunas acciones se realizaron con éxito\n\tconst [items, setItems] = useState(initialValue);\n\tconst [page, setPage] = useState(1);\n\tconst [loading, setLoading] = useState(false);\n\tconst [hasMore, setHasMore] = useState(true)\n\n\t// El param destruct es para destruir directamente los diferentes puntos finales de la API, como géneros\n\tconst getItems = async (path: string, params?: object) => {\n\t\tsetLoading(true);\n\t\tawait api\n\t\t\t.get(path, { params: { ...params } })\n\t\t\t.then((res) => {\n\t\t\t\tsetPage(page + 1);\n\t\t\t\tsetItems(res.data[destruct])\n\t\t\t\tif (res.data.page === res.data.total_pages) return setHasMore(false);\n\t\t\t})\n\t\t\t.catch((err) => Toast.fire({\n\t\t\t\ticon: \"error\",\n\t\t\t\ttitle: msg,\n\t\t\t}).then(() => console.log(err)))\n\t\t\t.finally(() => {\n\t\t\t\tsetLoading(false)\n\t\t\t});\n\t}\n\n\tconst getMoreItems = async (path: string, params?: object) => {\n\t\tsetLoading(true);\n\n\t\tawait api\n\t\t\t.get(path, { params: { page: page, ...params } })\n\t\t\t.then((res) => {\n\t\t\t\tsetItems((prevData) => [...prevData, ...res.data[destruct]])\n\t\t\t\tif (res.data.page === res.data.total_pages) return setHasMore(false);\n\t\t\t})\n\t\t\t.catch((err) => Toast.fire({\n\t\t\t\ticon: \"error\",\n\t\t\t\ttitle: msg,\n\t\t\t}).then(() => console.log(err)))\n\t\t\t.finally(() => {\n\t\t\t\tsetPage(page + 1);\n\t\t\t\tsetLoading(false)\n\t\t\t});\n\t}\n\n\treturn [items, loading, getItems, getMoreItems, hasMore] as const;\n};\n\ninterface getItemProps {\n\tpath: string;\n\tmsg: string;\n}\n\nconst useGetItemAPI = ({ path, msg }: getItemProps) => {\n\tconst [loading, setLoading] = useState(false);\n\n\tconst getItem = async (params?: object) => {\n\t\tsetLoading(true);\n\t\treturn await api\n\t\t\t.get(path, { params: { ...params } })\n\t\t\t.then((res) => res.data)\n\t\t\t.catch((err) => Toast.fire({\n\t\t\t\ticon: \"error\",\n\t\t\t\ttitle: msg,\n\t\t\t}).then(() => console.log(err)))\n\t\t\t.finally(() => setLoading(false));\n\t}\n\n\treturn [loading, getItem] as const;\n};\n\ninterface postProps {\n\tpath: string;\n\tmsg?: string;\n}\n\nconst usePostAPI = ({ path, msg }: postProps) => {\n\tconst [loading, setLoading] = useState(false);\n\n\tconst postItem = async (body: object, params?: object) => {\n\t\tsetLoading(true);\n\t\treturn await api\n\t\t\t.post(path, { ...body, ...params })\n\t\t\t.then((res) => res.data)\n\t\t\t.catch((err) => Toast.fire({\n\t\t\t\ticon: \"error\",\n\t\t\t\ttitle: msg,\n\t\t\t}).then(() => console.log(err)))\n\t\t\t.finally(() => setLoading(false));\n\t}\n\n\treturn [loading, postItem] as const;\n}\n\ninterface deleteItemProps {\n\tpath: string;\n\tmsg: string;\n}\n\nconst useDeleteAPI = ({ path, msg }: deleteItemProps) => {\n\tconst [loading, setLoading] = useState(false);\n\n\tconst deleteItem = async (body: object, params?: object) => {\n\t\tsetLoading(true);\n\t\treturn await api\n\t\t\t.delete(path, { data: body, ...params })\n\t\t\t.then((res) => res.data)\n\t\t\t.catch((err) => Toast.fire({\n\t\t\t\ticon: \"error\",\n\t\t\t\ttitle: msg,\n\t\t\t}).then(() => console.log(err)))\n\t\t\t.finally(() => setLoading(false));\n\t}\n\n\treturn [loading, deleteItem] as const;\n}\n\nexport { useGetItemsAPI, useGetItemAPI, usePostAPI, useDeleteAPI };\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}