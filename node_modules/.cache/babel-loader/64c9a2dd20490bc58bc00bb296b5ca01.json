{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sauls.DESKTOP-PNDI2L9\\\\OneDrive\\\\Escritorio\\\\movie-app-main\\\\src\\\\pages\\\\login\\\\index.tsx\",\n    _s = $RefreshSig$();\n\nimport { useNavigate } from \"react-router-dom\";\nimport { useContext, useEffect, useState } from \"react\";\nimport { UserContext } from \"context\";\nimport { Button, Input } from \"components\";\nimport { login, Toast } from \"utils\";\nimport { useGetItemAPI } from \"hooks\";\nimport { User, Password } from \"assets/icons/icons\";\nimport styles from \"./login.module.scss\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Login = () => {\n  _s();\n\n  const navigate = useNavigate();\n  const {\n    setToken,\n    texts\n  } = useContext(UserContext);\n  const [loadingToken, getToken] = useGetItemAPI({\n    path: \"/authentication/token/new\",\n    msg: texts.errors.errorGet\n  });\n  const [token, setTokenValue] = useState(\"\");\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [loading, setLoading] = useState(loadingToken);\n  const [error, setError] = useState(\"\");\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    try {\n      setLoading(true);\n      const res = await login(username, password, token, texts.errors.login);\n\n      if (res.success) {\n        setToken(res.request_token);\n        Toast.fire({\n          icon: \"success\",\n          title: texts.login.success\n        });\n        navigate(\"/\");\n      }\n    } catch (err) {\n      setError(texts.errors.errorLogin);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const initialRequest = async () => {\n    const res = await getToken();\n\n    if (res.success) {\n      setTokenValue(res.request_token);\n    }\n  };\n\n  useEffect(() => {\n    initialRequest();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.login,\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: styles.login__title,\n      children: texts.login.title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: styles.login__description,\n      children: texts.login.description\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: styles.login__form,\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(Input, {\n        icon: /*#__PURE__*/_jsxDEV(User, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 12\n        }, this),\n        name: \"username\",\n        onChange: e => setUsername(e.target.value),\n        placeholder: texts.login.username,\n        type: \"text\",\n        value: username,\n        error: error,\n        autocomplete: \"username\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        icon: /*#__PURE__*/_jsxDEV(Password, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 12\n        }, this),\n        name: \"password\",\n        onChange: e => setPassword(e.target.value),\n        placeholder: texts.login.password,\n        type: \"password\",\n        value: password,\n        error: error,\n        autocomplete: \"current-password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 5\n      }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: styles.login__error,\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        className: `${styles.login__submit}`,\n        disabled: loading,\n        loading: loading,\n        type: \"submit\",\n        children: texts.login.button\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 3\n  }, this);\n};\n\n_s(Login, \"DbFB91kTrrhadyKd4fFZqMCdxsA=\", false, function () {\n  return [useNavigate, useGetItemAPI];\n});\n\n_c = Login;\nexport { Login };\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["useNavigate","useContext","useEffect","useState","UserContext","Button","Input","login","Toast","useGetItemAPI","User","Password","styles","Login","navigate","setToken","texts","loadingToken","getToken","path","msg","errors","errorGet","token","setTokenValue","username","setUsername","password","setPassword","loading","setLoading","error","setError","handleSubmit","e","preventDefault","res","success","request_token","fire","icon","title","err","errorLogin","initialRequest","login__title","login__description","description","login__form","target","value","login__error","login__submit","button"],"sources":["C:/Users/sauls.DESKTOP-PNDI2L9/OneDrive/Escritorio/movie-app-main/src/pages/login/index.tsx"],"sourcesContent":["import { useNavigate } from \"react-router-dom\";\nimport { useContext, useEffect, useState } from \"react\";\nimport { UserContext } from \"context\";\nimport { Button, Input } from \"components\";\nimport { login, Toast } from \"utils\";\nimport { useGetItemAPI } from \"hooks\";\nimport { User, Password } from \"assets/icons/icons\";\nimport styles from \"./login.module.scss\";\n\nconst Login = () => {\n\tconst navigate = useNavigate();\n\tconst { setToken, texts } = useContext(UserContext);\n\tconst [loadingToken, getToken] = useGetItemAPI({\n\t\tpath: \"/authentication/token/new\",\n\t\tmsg: texts.errors.errorGet,\n\t});\n\tconst [token, setTokenValue] = useState(\"\");\n\tconst [username, setUsername] = useState(\"\");\n\tconst [password, setPassword] = useState(\"\");\n\tconst [loading, setLoading] = useState(loadingToken);\n\tconst [error, setError] = useState(\"\");\n\n\tconst handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\n\t\te.preventDefault();\n\t\ttry {\n\t\t\tsetLoading(true);\n\t\t\tconst res = await login(username, password, token, texts.errors.login);\n\t\t\tif (res.success) {\n\t\t\t\tsetToken(res.request_token);\n\t\t\t\tToast.fire({\n\t\t\t\t\ticon: \"success\",\n\t\t\t\t\ttitle: texts.login.success,\n\t\t\t\t});\n\t\t\t\tnavigate(\"/\");\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tsetError(texts.errors.errorLogin);\n\t\t} finally {\n\t\t\tsetLoading(false);\n\t\t}\n\t};\n\n\tconst initialRequest = async () => {\n\t\tconst res = await getToken();\n\t\tif (res.success) {\n\t\t\tsetTokenValue(res.request_token);\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tinitialRequest();\n\t}, []); \n\n\treturn (\n\t\t<div className={styles.login}>\n\t\t\t<h1 className={styles.login__title}>{texts.login.title}</h1>\n\t\t\t<p className={styles.login__description}>{texts.login.description}</p>\n\t\t\t<form className={styles.login__form} onSubmit={handleSubmit}>\n\t\t\t\t<Input\n\t\t\t\t\ticon={<User />}\n\t\t\t\t\tname=\"username\"\n\t\t\t\t\tonChange={(e) => setUsername(e.target.value)}\n\t\t\t\t\tplaceholder={texts.login.username}\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tvalue={username}\n\t\t\t\t\terror={error}\n\t\t\t\t\tautocomplete=\"username\"\n\t\t\t\t/>\n\t\t\t\t<Input\n\t\t\t\t\ticon={<Password />}\n\t\t\t\t\tname=\"password\"\n\t\t\t\t\tonChange={(e) => setPassword(e.target.value)}\n\t\t\t\t\tplaceholder={texts.login.password}\n\t\t\t\t\ttype=\"password\"\n\t\t\t\t\tvalue={password}\n\t\t\t\t\terror={error}\n\t\t\t\t\tautocomplete=\"current-password\"\n\t\t\t\t/>\n\t\t\t\t{error && <p className={styles.login__error}>{error}</p>}\n\t\t\t\t<Button\n\t\t\t\t\tclassName={`${styles.login__submit}`}\n\t\t\t\t\tdisabled={loading}\n\t\t\t\t\tloading={loading}\n\t\t\t\t\ttype=\"submit\"\n\t\t\t\t>\n\t\t\t\t\t{texts.login.button}\n\t\t\t\t</Button>\n\t\t\t</form>\n\t\t</div>\n\t);\n};\n\nexport { Login };"],"mappings":"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"},"metadata":{},"sourceType":"module"}